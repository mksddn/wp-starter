# Установка Wordpress через Docker + WP CLI
Стартер для разработки на WordPress локально и с командой.

## Запуск приложения
1. Создай и заполни **.env** файл на основе .env.example (*или запроси детали у старшего разработчика*)
> Убедись, что у тебя установлен [Docker](https://www.docker.com) `docker -v`
2. Запусти приложение `./app up`
3. [Импортируй дамп БД](#dbimport), если нужно `./app db-import`

| username | password |
| -------- | -------- |
| dev      | root     |

### Команды приложения
- Запустить приложение `./app up`
- Остановить приложение `./app stop`
- Очистить проект (удалит все, кроме файлов темы) `./app clean`
- Создать нового админа `./app user-create`
- Экспорт базы данных (в корне репозитория создастся dbdump.sql) `./app db-export`
- <a id="dbimport"></a>Импорт базы данных `./app db-import`
> Для импорта размести в корне репозитория дамп БД (не архив) с расширением .sql

### Команды NPM
> Убедись, что у тебя установлен [Node.js](https://nodejs.org/en) `node --version` (рекомендую использовать [NVM](https://github.com/nvm-sh/nvm))
- Установить зависимости `./app npm-install`
- Запустить режим разработки (browsersync + postcss) `./app watch`
> ВНИМАНИЕ! Команда работает только при запущенном проекте (`./app up`), а hot-reload работает на 3000 порту ([http://localhost:3000](http://localhost:3000/))

### Команды Composer
> Убедись, что у тебя установлен [Composer](https://getcomposer.org/) `composer --version`
- Установить зависимости `./app composer-install`
- Проверить все файлы PHP на наличие синтаксических ошибок `./app lint:php`
- Проверить все файлы PHP согласно [WP Coding Standards](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/) `./app lint:wpcs`

## Советы
- Панель phpMyAdmin доступна по адресу [http://localhost:8080](http://localhost:8080/)
- Не размещай важный код в **wp-config.php**, так как этот файл в каждой среде свой. Динамической является только директория **/wp-content/** с темой, плагинами и загрузками.
- Не забывай передавать дамп БД другому разработчику или актуализировать ее при деплое в staging/production `./app db-export`
- Тема поддерживает программное создание страниц в файле **/inc/hard-pages-list.php** (чтобы не привязываться к БД).
- Тема поддерживает acf.json
![acf-sync](https://github.com/mksddn/wp-starter/assets/22976310/da78f925-ca72-4124-87a9-1e58dee0f398)

## Модули, расширяющие функционал

### Cyr2Lat
Конвертирует кириллические символы в латинские для ЧПУ, названий файлов и полей ACF.

### Disable Gutenberg
Полностью отключает редактор Gutenberg и все связанные с ним скрипты, стили и REST API хуки.

### Duplicate Post
Добавляет функционал дублирования записей любого типа с полным копированием контента, ACF полей, таксономий и вложений.

### Export & Import Single Page
Система экспорта и импорта отдельных страниц и страниц опций в формате JSON с сохранением всех настроек.

### File Size Column
Добавляет в медиа-библиотеку колонку с размером файлов и возможность сортировки по размеру.

### Forms Handler
Универсальная система обработки форм с REST API, интеграцией Telegram/Google Sheets и сохранением заявок в админ-панели.

### Plugins Logger
Автоматически ведет список активных плагинов, сохраняя их text-domain в файл `plugins.txt`.

### Postman Collection Admin
Генератор коллекций Postman для REST API с автоматическим созданием запросов для страниц и кастомных типов записей.

### SVG Support
Поддержка загрузки SVG файлов в медиа-библиотеку с ограничением доступа только для администраторов.

### Thumbnail Column
Добавляет колонку "Миниатюра" в списки записей и страниц с автоматическим поиском изображений-вложений.